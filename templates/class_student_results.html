{% extends "fitness_test_base.html" %}

{% block content_fitness_testing_base  %}

    <!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top">
        <div class="navbar-header">
            <div class="navbar-brand">Fitness Testing App - Results Page</div><br>
        </div>
    </div>
    <!-- Fixed navbar -->

    Student: {{ student_name }}
    Gender: {{ gender }}

    {% for mtc in major_test_categories %}
        {{ mtc }}
        <div id="{{ mtc }}_chart" style="width:1200px;height:600px"></div>
    {% endfor %}

    <script>
        $(document).ready(function() {

            {% for mtc in major_test_categories %}
                var {{ mtc }}_data = [
                    {% for inner_mtc, cat, test_name, percentile, result in results %}
                        {% if inner_mtc == mtc %}
                            [{{ forloop.counter0 }}, {{ percentile }}],
                        {% endif %}
                    {% endfor %}
                ];

                var {{ mtc }}_ticks = [
                    {% for inner_mtc, cat, test_name, percentile, result in results %}
                        {% if inner_mtc == mtc %}
                            [{{ forloop.counter0 }}, "{{ test_name }}"],
                        {% endif %}
                    {% endfor %}
                ];

                var {{ mtc }}_chart_options = {
                    axisLabels: {
                        show: true
                    },
                    xaxis: {
                        axisLabel: 'Test',
                        ticks: {{ mtc }}_ticks
                    },
                    yaxis: {
                        position: 'left',
                        axisLabel: 'Percentile'
                    },
                    series: {
                        bars: {
                            show: true
                        }
                    },
                    bars: {
                        align: "center",
                        barWidth: 1
                    }
                 };

                var {{ mtc }}_dataset = [{ label: "All tests", data: {{ mtc }}_data, color: "#5482FF"}];

                $.plot("#{{ mtc }}_chart",
                        {{ mtc }}_dataset,
                        {{ mtc }}_chart_options);
            {% endfor %}

        });
    </script>

{% endblock %}
