
<form method="POST" id="modalForm" enctype="multipart/form-data" action="{{ post_to_url }}" class="form-horizontal">

    <div class="modal-header">
        <h4 class="modal-title">{% if modal_title %}{{ modal_title }}{% else %}{{ functionality_name }}{% endif %}</h4>
    </div>

    <div class="modal-body">
        {% csrf_token %}
        {% if form %}
            {{ form.non_field_errors }}
            {% for field in form %}
                {% if field.is_hidden %}
                    <div class="form-group" style="display: none">{{ field }}</div>
                {% else %}
                    <div class="form-group {% if field.errors %}has-error has-feedback{% endif %}">
                        <div class="col-sm-4">{{ field.label_tag }}</div>
                        <div class="col-sm-8">
                            {{ field }}
                            {% if field.help_text %}<span class="form-field-help">{{ field.help_text }}</span>{% endif %}
                            {% if field.errors %}<span class="help-block">{{ field.errors }}</span>{% endif %}
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        {% elif prompt_message %}
            {{ prompt_message }}
        {% endif %}
    </div>

    <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-primary">{{ functionality_name }}</button>
    </div>

</form>
