
<div id="class_results_graph_header">

    <h2>{{ title }}</h2>

    {% for selection_option in selection_options %}
        <select class="graph_selection">
            <option value=""></option>
            {% for value, item, selected in selection_option %}
                <option value="{{ value }}" {% if selected %}selected{% endif %}>{{ item }}</option>
            {% endfor %}
        </select>
    {% endfor %}

</div>

{% if graphs %}

    {% for graph_info, graph_title, y_axis_label, y_axis_min, y_axis_max, n_items_less_one in graphs %}
        <hr>
        <h3>{{ graph_title }}</h3>
        <div class="class_result_view" id="graph_{{ forloop.counter0 }}" style="width:600px;height:300px"></div>
    {% endfor %}

    <script>
        $(document).ready(function() {

            {% for graph_info, graph_title, y_axis_label, y_axis_min, y_axis_max, y_axis_tick_size, n_items in graphs %}
                var graph_{{ forloop.counter0 }}_data = [
                    {% for count, label, value in graph_info %}
                        [{{ count }}, {{ value }}],
                    {% endfor %}
                ];
            {% endfor %}

            {% for graph_info, graph_title, y_axis_label, y_axis_min, y_axis_max, y_axis_tick_size, n_items in graphs %}

                var graph_{{ forloop.counter0 }}_ticks = [
                    {% for count, label, value in graph_info %}
                        [{{ count }}, "{{ label }}"],
                    {% endfor %}
                ];

                var graph_{{ forloop.counter0 }}_chart_options = {
                    axisLabels: {
                        show: true
                    },
                    xaxis: {
                        axisLabel: '',
                        ticks: graph_{{ forloop.counter0 }}_ticks,
                        min: -0.7,
                        max: {{ n_items }}.7,
                        tickLength: 0
                    },
                    yaxis: {
                        position: 'left',
                        axisLabel: '{{ y_axis_label }}',
                        axisLabelFontSizePixels: 18,
                        min: {{ y_axis_min }},
                        max: {{ y_axis_max }},
                        tickSize: {{ y_axis_tick_size }},
                        font: {
                            size: 14,
                            weight: "bold",
                            variant: "small-caps",
                            color: "#000000"
                        }
                    },
                    series: {
                        bars: {
                            show: true
                        }
                    },
                    bars: {
                        align: "center",
                        barWidth: 0.6
                    },
                    legend: {
                        backgroundOpacity: 0.5,
                        show: false
                    }
                 };

                var graph_{{ forloop.counter0 }}_dataset = [
                    { label: "{{ graph_title }}", data: graph_{{ forloop.counter0 }}_data },
                ];

                $.plot("#graph_{{ forloop.counter0 }}",
                        graph_{{ forloop.counter0 }}_dataset,
                        graph_{{ forloop.counter0 }}_chart_options);

            {% endfor %}

        });
    </script>

{% else %}
    <hr>
    <h4>{{ not_selected_text }}</h4>
{% endif %}